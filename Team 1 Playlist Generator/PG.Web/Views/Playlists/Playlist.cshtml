@inject IJsonHelper Json
@model PlaylistViewModel

@using (Html.BeginForm())
{


    <div class="containerPlaylist">




        <div class="left-colPlaylist">

            <div style="padding-top:10vh" id="controlers">
                <input type="button" onclick="DZ.player.playTracks(@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.DeezerIDs) as String), true);" value="Play Songs" />
            </div>

            <div class="yearPlaylist">EST 2020</div>

            <div class="coverPlaylist">

                @foreach (var song in Model.Songs)
                {
                    <div class="album-name2Playlist">
                        <p><span>@song.Title | @song.DurationInMinutes</span></p>
                    </div>


                    @*<a href="@song.Preview"> @song.Title | @song.DurationInMinutes</a>*@
                }

            </div>
            <div class="block-coverPlaylist"></div>

            @*<div class="playPlaylist">
                    <input type="button" onclick="DZ.player.playTracks(@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.DeezerIDs) as String), true);" value="Play Songs" />
                </div>*@



        </div>

        <div class="right-colPlaylist">

            <div class="upperPlaylist">

                <div class="aboutPlaylist">

                    <h1>@Model.Title</h1>
                    <div class="album-name2Playlist">
                        <p><ion-icon name="radioPlaylist"></ion-icon> &nbsp;<span>@Model.UserId</span></p>

                        <p><ion-icon name="radioPlaylist"></ion-icon> &nbsp;<span>@Model.Rank</span></p>
                    </div>

                    <p>Share now : </p>

                </div>

            </div>

            <div class="upper-blockPlaylist"></div>

            <div class="bottomPlaylist">
                <div class="data2Playlist">

                    <div id="dz-root"></div>
                    <div id="player" align="center"></div>

                    <div class="album-name3Playlist">
                        <p id="namePlaylist">Play Playlist</p>
                    </div>

                    <div class="album-artist3Playlist">
                        <p id="artistPlaylist">Powered by Deezer</p>
                    </div>


                    <div id="player" align="center"></div>

                </div>

            </div>
            <div class="block-bottomPlaylist"></div>

        </div>

    </div>



    <script>
        function event_listener_append() {
            var pre = document.getElementById('event_listener');
            var line = [];
            for (var i = 0; i < arguments.length; i++) {
                line.push(arguments[i]);
            }
            pre.innerHTML += line.join(' ') + "\n";
        }
        function onPlayerLoaded() {
            $("#controlers input").attr('disabled', false);
            event_listener_append('player_loaded');
            DZ.Event.subscribe('current_track', function (arg) {
                event_listener_append('current_track', arg.index, arg.track.title, arg.track.album.title);
            });
            DZ.Event.subscribe('player_position', function (arg) {
                event_listener_append('position', arg[0], arg[1]);
                $("#slider_seek").find('.bar').css('width', (100 * arg[0] / arg[1]) + '%');
            });
        }
        document.addEventListener('DOMContentLoaded', function () {
            DZ.init({
                appId: '8',
                channelUrl: 'https://developers.deezer.com/examples/channel.php',
                player: {
                    container: 'player',
                    playlist: true,
                    width: 850,
                    height: 95,
                    onload: onPlayerLoaded
                }
            });
        });



        TweenMax.from(".left-colPlaylist", 2, {
            width: "0%",
            ease: Expo.easeInOut
        })


        TweenMax.from(".yearPlaylist", 2, {
            delay: 3.1,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })

        TweenMax.from(".album-namePlaylist", 2, {
            delay: 2.4,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })

        TweenMax.from(".album-artistPlaylist", 2, {
            delay: 2.6,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })

        TweenMax.from(".aboutPlaylist h1", 2, {
            delay: 3,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })

        TweenMax.from(".album-name2Playlist", 2, {
            delay: 3.2,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })




        TweenMax.from(".album-name3Playlist", 2, {
            delay: 4,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })

        TweenMax.from(".album-artist3Playlist", 2, {
            delay: 4.2,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })

        TweenMax.from(".nextPlaylist", 2, {
            delay: 4.4,
            y: 20,
            opacity: 0,
            ease: Expo.easeInOut
        })




    </script>
}
